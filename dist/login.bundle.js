(()=>{"use strict";const e="st-users";new RegExp(/^(?=(?:.*[a-zA-Z]){2,})(?=(?:.*\d){2,})[a-zA-Z0-9]+$/);class t{encodeHTML(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;")}togglePassword(){document.querySelectorAll(".btn-toggle-password").forEach((e=>e.addEventListener("click",(e=>{if(e&&e.currentTarget instanceof HTMLButtonElement){const t=e.currentTarget.dataset.type,n=e.currentTarget.dataset.isToggle;if("password"===t){const e=document.getElementById("password");e instanceof HTMLInputElement&&(e.type="0"===n?"text":"password")}if("confirm"===t){const e=document.getElementById("confirm-password");e instanceof HTMLInputElement&&(e.type="0"===n?"text":"password")}e.currentTarget.dataset.isToggle="0"===n?"1":"0"}}))))}}document.addEventListener("DOMContentLoaded",(()=>{new n}));class n extends t{constructor(){super(),this.togglePassword();const e=document.getElementById("loginForm"),t=document.querySelector(".register");t instanceof HTMLButtonElement&&t.addEventListener("click",(()=>location.href="./register.html")),e instanceof HTMLFormElement&&(this.handleLogin=this.handleLogin.bind(this),e.addEventListener("submit",this.handleLogin))}handleLogin(t){t.preventDefault(),t.stopPropagation();const n=document.forms.namedItem("loginForm");if(n){const t=localStorage.getItem(e),o=new FormData(n),s=this.encodeHTML(o.get("username")),r=this.encodeHTML(o.get("password"));if(t&&t.length>0){const n=JSON.parse(t),o=n.findIndex((e=>e.username===s&&e.password===r));-1==o&&this.displayLoginError(!0),void 0!==n[o]&&(n[o].isAuth=!0,localStorage.setItem(e,JSON.stringify(n)),this.displayLoginError(!1),location.href="/dashboard.html")}else this.displayLoginError(!0)}}displayLoginError(e){const t=document.querySelector(".login-error");t&&(t.style.display=e?"initial":"none")}}})();