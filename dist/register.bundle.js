(()=>{"use strict";class e{encodeHTML(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;")}togglePassword(){document.querySelectorAll(".btn-toggle-password").forEach((e=>e.addEventListener("click",(e=>{if(e&&e.currentTarget instanceof HTMLButtonElement){const t=e.currentTarget.dataset.type,s=e.currentTarget.dataset.isToggle;if("password"===t){const e=document.getElementById("password");e instanceof HTMLInputElement&&(e.type="0"===s?"text":"password")}if("confirm"===t){const e=document.getElementById("confirm-password");e instanceof HTMLInputElement&&(e.type="0"===s?"text":"password")}e.currentTarget.dataset.isToggle="0"===s?"1":"0"}}))))}}const t="st-users",s=(Object.freeze({todo:"to-do",inProgress:"in-progress",inReview:"in-review",closed:"closed"}),Object.freeze({errorFile:"The JSON file has an error in the Keys  or has an invalid type."}),Object.freeze({SEO_TITLE:"Login | Secrets",SEO_DESCRIPTION:"The site of secrets description",SEO_KEYWORDS:"login, secrets",header:"Trust your Secrets",username:"username",password:"password",lbUsername:"Username",lbPassword:"Password",usernamePlaceholder:"fancy user",passwordPlaceholder:"Secret",signInBtn:"Sign In",signUpBtn:"Sign Up",forgotBtn:"Forgot password ?"}),Object.freeze({atLeast2Letter2Numbers:new RegExp(/^(?=(?:.*[a-zA-Z]){2,})(?=(?:.*\d){2,})[a-zA-Z0-9]+$/),atLeast1Uppercase1LowerWithNumbersAndSpecial:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[^a-zA-Z\d])[a-zA-Z\d\W]+$/}));document.addEventListener("DOMContentLoaded",(()=>{const t=new e;r(),d(),n(),a(),o(),t.togglePassword()}));const r=()=>document.getElementById("registerForm").addEventListener("submit",i),n=()=>document.getElementById("username").addEventListener("keyup",(e=>{const t=document.querySelector(".error-container p:nth-child(1)");s.atLeast2Letter2Numbers.test(e.currentTarget.value)?t.classList.add("success"):t.classList.remove("success")})),a=()=>document.getElementById("password").addEventListener("keyup",(e=>{const t=document.querySelector(".error-container p:nth-child(2)");s.atLeast1Uppercase1LowerWithNumbersAndSpecial.test(e.currentTarget.value)?t.classList.add("success"):t.classList.remove("success"),c()})),o=()=>document.getElementById("confirm-password").addEventListener("keyup",(e=>{const t=document.querySelector(".error-container p:nth-child(3)");s.atLeast1Uppercase1LowerWithNumbersAndSpecial.test(e.currentTarget.value)?t.classList.add("success"):t.classList.remove("success"),c()})),c=()=>{const e=document.querySelector(".error-container p:nth-child(4)");document.getElementById("password").value===document.getElementById("confirm-password").value?e.classList.add("success"):e.classList.remove("success")},d=()=>document.getElementById("btn-back").addEventListener("click",(()=>location.href="./index.html")),i=e=>{e.preventDefault(),e.stopPropagation();const r=document.forms.registerForm,n=new FormData(r),a=security.encodeHTML(n.get("username")),o=security.encodeHTML(n.get("password")),c=encodeHTML(n.get("confirm-password"));if(s.atLeast2Letter2Numbers.test(a)&&s.atLeast1Uppercase1LowerWithNumbersAndSpecial.test(o)&&s.atLeast1Uppercase1LowerWithNumbersAndSpecial.test(c)&&o===c){const e=localStorage.getItem(t);if(e&&e.length>0){const s=JSON.parse(e);s.push({id:(new Date).getTime(),username:a,password:o,isAuth:!1}),localStorage.setItem(t,JSON.stringify(s))}else localStorage.setItem(t,JSON.stringify([{id:(new Date).getTime(),username:a,password:o,isAuth:!1}]));location.href="index.html"}}})();