(()=>{"use strict";class e{encodeHTML(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;")}togglePassword(){document.querySelectorAll(".btn-toggle-password").forEach((e=>e.addEventListener("click",(e=>{if(e&&e.currentTarget instanceof HTMLButtonElement){const t=e.currentTarget.dataset.type,s=e.currentTarget.dataset.isToggle;if("password"===t){const e=document.getElementById("password");e instanceof HTMLInputElement&&(e.type="0"===s?"text":"password")}if("confirm"===t){const e=document.getElementById("confirm-password");e instanceof HTMLInputElement&&(e.type="0"===s?"text":"password")}e.currentTarget.dataset.isToggle="0"===s?"1":"0"}}))))}}const t="st-users",s={atLeast2Letter2Numbers:new RegExp(/^(?=(?:.*[a-zA-Z]){2,})(?=(?:.*\d){2,})[a-zA-Z0-9]+$/),atLeast1Uppercase1LowerWithNumbersAndSpecial:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[^a-zA-Z\d])[a-zA-Z\d\W]+$/};document.addEventListener("DOMContentLoaded",(()=>{new n}));class n extends e{constructor(){super(),this.togglePassword();const e=document.getElementById("registerForm"),t=document.getElementById("btn-back");t instanceof HTMLButtonElement&&t.addEventListener("click",(()=>location.href="./index.html")),e instanceof HTMLElement&&(this.handleRegister=this.handleRegister.bind(this),e.addEventListener("submit",this.handleRegister)),this.inputUsernameListener(),this.inputPasswordListener()}handleRegister(e){e.preventDefault(),e.stopPropagation();const t=document.forms.namedItem("registerForm");if(t){const e=new FormData(t),s=this.encodeHTML(e.get("username")),n=this.encodeHTML(e.get("password")),r=this.encodeHTML(e.get("confirm-password"));this.handleValidation({username:s,password:n,confirmPassword:r})}}handleValidation({username:e,password:n,confirmPassword:r}){if(s.atLeast2Letter2Numbers.test(e)&&s.atLeast1Uppercase1LowerWithNumbersAndSpecial.test(n)&&s.atLeast1Uppercase1LowerWithNumbersAndSpecial.test(r)&&n===r){const s=localStorage.getItem(t);if(s&&s.length>0){const r=JSON.parse(s);r.push({id:(new Date).getTime(),username:e,password:n,isAuth:!1}),localStorage.setItem(t,JSON.stringify(r))}else localStorage.setItem(t,JSON.stringify([{id:(new Date).getTime(),username:e,password:n,isAuth:!1}]));location.href="index.html"}}inputUsernameListener(){const e=document.getElementById("username"),t=document.querySelector(".error-container p:nth-child(1)");e instanceof HTMLInputElement&&e.addEventListener("keyup",(e=>{e.currentTarget instanceof HTMLInputElement&&(s.atLeast2Letter2Numbers.test(e.currentTarget.value)?t.classList.add("success"):t.classList.remove("success"))}))}inputPasswordListener(){const e=document.getElementById("password"),t=document.getElementById("confirm-password"),n=document.querySelector(".error-container p:nth-child(2)"),r=document.querySelector(".error-container p:nth-child(3)");e instanceof HTMLInputElement&&t instanceof HTMLInputElement&&(e.addEventListener("keyup",(e=>{e.currentTarget instanceof HTMLInputElement&&(s.atLeast1Uppercase1LowerWithNumbersAndSpecial.test(e.currentTarget.value)?n.classList.add("success"):n.classList.remove("success")),this.checkPasswordSameError()})),t.addEventListener("keyup",(e=>{e.currentTarget instanceof HTMLInputElement&&(s.atLeast1Uppercase1LowerWithNumbersAndSpecial.test(e.currentTarget.value)?r.classList.add("success"):r.classList.remove("success")),this.checkPasswordSameError()})))}checkPasswordSameError(){const e=document.querySelector(".error-container p:nth-child(4)"),t=document.getElementById("password"),s=document.getElementById("confirm-password");e instanceof HTMLParagraphElement&&t instanceof HTMLInputElement&&s instanceof HTMLInputElement&&(t.value===s.value?e.classList.add("success"):e.classList.remove("success"))}}})();