(()=>{"use strict";var e={};(e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})})(e);const t="st-task",n="st-users",o=Object.freeze({todo:"to-do",inProgress:"in-progress",inReview:"in-review",closed:"closed"}),d=Object.freeze({errorFile:"The JSON file has an error in the Keys  or has an invalid type."}),a=["id","title","deadline","description","category"],r=(Object.freeze({SEO_TITLE:"Login | Secrets",SEO_DESCRIPTION:"The site of secrets description",SEO_KEYWORDS:"login, secrets",header:"Trust your Secrets",username:"username",password:"password",lbUsername:"Username",lbPassword:"Password",usernamePlaceholder:"fancy user",passwordPlaceholder:"Secret",signInBtn:"Sign In",signUpBtn:"Sign Up",forgotBtn:"Forgot password ?"}),Object.freeze({atLeast2Letter2Numbers:new RegExp(/^(?=(?:.*[a-zA-Z]){2,})(?=(?:.*\d){2,})[a-zA-Z0-9]+$/),atLeast1Uppercase1LowerWithNumbersAndSpecial:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[^a-zA-Z\d])[a-zA-Z\d\W]+$/}),()=>document.getElementById("modal-add-or-edit").close()),l=()=>document.getElementById("import-modal").close(),i=()=>localStorage.getItem(t),s=e=>localStorage.setItem(t,JSON.stringify(e)),c=e=>{e.preventDefault();const t=e.currentTarget.dataset.taskId,n=e.currentTarget.options[e.currentTarget.selectedIndex].value,o=JSON.parse(i()).filter((e=>(e.id===t&&(e.category=n),e)));s(o),location.reload()},m=(e,t)=>{document.querySelector(`.${e}-wrapper`).append(...t.children)},u=t=>{t.preventDefault(),t.stopPropagation();const n=t.target.dataset.type,o=t.target.dataset.taskId,d=document.forms.addOrEditTask,a=new FormData(d),r=(0,e.encodeHTML)(a.get("title")),l=(0,e.encodeHTML)(a.get("deadline")),i=(0,e.encodeHTML)(a.get("description"));t.submitter.innerText="Saving...",t.submitter.disabled=!0,p(t.submitter,{title:r,deadline:l,description:i},n,o)},p=(e,t,n,d)=>{"add"===n?(e=>{const t=i();if(t&&t.length>0){const n=JSON.parse(t);n.push({id:e.title.replaceAll(" ","-"),title:e.title,deadline:e.deadline,description:e.description,category:o.todo}),s(n)}else s([{id:e.title.replaceAll(" ","-"),title:e.title,deadline:e.deadline,description:e.description,category:o.todo}])})(t):((e,t)=>{const n=i(),o=JSON.parse(n).filter((n=>(n.id===e&&(n.id=t.title.replaceAll(" ","-"),n.title=t.title,n.deadline=t.deadline,n.description=t.description),n)));s(o)})(d,t),setTimeout((()=>{e.innerText="Confirm",e.removeAttribute("disabled"),r(),location.reload()}),1500)},g=e=>{const t=document.createElement("article"),n=document.createElement("header"),d=document.createElement("select"),a=document.createElement("option"),r=document.createElement("option"),l=document.createElement("option"),i=document.createElement("option"),s=document.createElement("option"),c=document.createElement("h5"),m=document.createElement("p"),u=document.createElement("h6"),p=document.createElement("footer"),g=document.createElement("button"),f=document.createElement("button"),h=document.createElement("i"),y=document.createElement("i"),E=document.createElement("i"),S=document.createElement("span"),v=document.createElement("span"),C=document.createElement("span");return c.textContent=e.title,d.className="move",d.name="categories",d.dataset.taskId=e.id,r.value=o.todo,l.value=o.inProgress,i.value=o.inReview,s.value=o.closed,a.textContent="Move To",r.textContent="To Do",l.textContent="In Progress",i.textContent="In Review",s.textContent="Closed",d.options.add(a),d.options.add(r),d.options.add(l),d.options.add(i),d.options.add(s),m.textContent=e.description,h.className="fa-regular fa-calendar",y.className="fa-solid fa-pencil",y.ariaHidden=!0,y.title="Edit Task",E.className="fa-solid fa-trash",E.ariaHidden=!0,E.title="Delete Task",S.className="fa-sr-only",S.textContent="The Font Awesome Calendar Icon",C.className="sr-only",C.textContent="Delete Task",v.className="sr-only",v.textContent="Edit Task",g.className="btn edit",f.className="btn delete",n.appendChild(c),n.appendChild(d),u.appendChild(h),u.appendChild(S),g.appendChild(y),g.appendChild(v),f.appendChild(E),f.appendChild(C),S.insertAdjacentHTML("afterend",` DeadLine: ${e.deadline}`),g.insertAdjacentText("beforeend","Edit"),f.insertAdjacentText("beforeend","Delete"),g.setAttribute("data-edit",e.id),f.setAttribute("data-delete",e.id),p.appendChild(g),p.appendChild(f),t.appendChild(n),t.appendChild(m),t.appendChild(u),t.appendChild(p),t},f=()=>{document.querySelectorAll(".delete").forEach((e=>{e.addEventListener("click",h)}))},h=e=>{e.preventDefault();const t=e.currentTarget.dataset.delete,n=JSON.parse(i()).filter((e=>e.id!==t));s(n),location.reload()},y=()=>{document.querySelectorAll(".edit").forEach((e=>e.addEventListener("click",E)))},E=e=>{e.preventDefault();const t=e.currentTarget.dataset.edit,n=JSON.parse(i()).find((e=>e.id===t)),o=document.getElementById("modal-add-or-edit");o.querySelector("form").dataset.type="edit",o.querySelector("form").dataset.taskId=t,o.querySelector("legend").textContent="Edit Task",o.querySelector("input#title").value=n.title,o.querySelector("input#deadline").value=n.deadline,o.querySelector("textarea#description").value=n.description,o.showModal()},S=e=>{e.preventDefault();const t=i();if(t&&t.length>0){let e=document.createElement("a");e.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),e.setAttribute("download","tasks.json"),e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e)}},v=e=>{e.preventDefault(),e.stopPropagation();const t=new FileReader;t.onload=C;const n=document.forms.importJson,o=new FormData(n).get("file-json");t.readAsText(o)},C=e=>{const t=JSON.parse(e.target.result);t&&t.length>0&&b(t)},b=e=>{const t=document.querySelector(".error-import");if(a.every((t=>e.every((e=>e.hasOwnProperty(t)))))){const n=i(),o=JSON.parse(n),d=o.concat(e.filter((e=>!o.some((t=>t.id===e.id)))));s(d),t.textContent="",location.reload()}else t.textContent=d.errorFile};document.addEventListener("DOMContentLoaded",(()=>{(()=>{const e=localStorage.getItem(n);null==e&&(location.href="index.html");const t=JSON.parse(e),o=t.find((e=>e.isAuth));if(t.find((e=>e.isAuth))){const e=document.createElement("input");e.type="hidden",e.id="auth-user",e.value=o.id,document.body.appendChild(e)}else location.href="index.html"})(),document.querySelector(".btn-log-out").addEventListener("click",(()=>{const e=document.getElementById("auth-user"),t=localStorage.getItem(n),o=JSON.parse(t).filter((t=>(t.username===e.value&&(t.isAuth=!1),t)));localStorage.setItem(n,JSON.stringify(o)),location.reload()})),document.querySelector(".show-add-modal").addEventListener("click",(()=>{document.getElementById("modal-add-or-edit").showModal()})),document.querySelector(".import-task").addEventListener("click",(()=>{document.getElementById("import-modal").showModal()})),document.querySelector(".close-modal-add").addEventListener("click",r),document.querySelector(".close-modal-import").addEventListener("click",l),document.getElementById("addOrEditTask").addEventListener("submit",u),document.querySelector(".export-task").addEventListener("click",S),document.getElementById("importJson").addEventListener("submit",v),(()=>{const e=i();e&&e.length>0&&(e=>{let t=new DocumentFragment,n=new DocumentFragment,d=new DocumentFragment,a=new DocumentFragment;const r=e.filter((e=>e.category===o.todo)),l=e.filter((e=>e.category===o.inProgress)),i=e.filter((e=>e.category===o.inReview)),s=e.filter((e=>e.category===o.closed));for(const e of r)t.append(g(e));for(const e of l)n.append(g(e));for(const e of i)d.append(g(e));for(const e of s)a.append(g(e));r&&r.length>0&&m(o.todo,t),l&&l.length>0&&m(o.inProgress,n),i&&i.length>0&&m(o.inReview,d),s&&s.length>0&&m(o.closed,a),document.querySelectorAll(".move").forEach((e=>{e.addEventListener("change",c)})),y(),f()})(JSON.parse(e))})()}))})();